<!-- <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" type="text/css"
	th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap.min.css}" />
<link
	href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/south-street/jquery-ui.css"
	rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/style.css">
<style>
.wrapper {
	position: relative;
	width: 400px;
	height: 200px;
	-moz-user-select: none;
	-webkit-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

img {
	position: absolute;
	left: 0;
	top: 0;
}

.signature-pad {
	position: absolute;
	left: 0;
	top: 0;
	width: inherit;
	height: 200px;
	border: black;
	border-style: solid;
}

#fileSelectDiv {
	padding: 12px;
}

#cropBtns {
	padding: 10px;
}
</style>

<title>Signature Capture</title>
</head>

<body>
	<div class="container">

		<div id="container" class="col-md-6 col-md-offset-3">
			<p>Do you want to upload or draw signature ?</p>
			<div>
				<input type="radio" id="uploadOpt" name="signOption" value="upload"><label for="email">Upload</label> 
				<input type="radio" id="drawOpt" name="signOption" value="draw"> <label for="phone">Draw</label>
			</div>
		</div>
		<div id="uploadContainer" class="container" style="display: none;">
			<div class="col-md-6 col-md-offset-3">
				<div id="upload-ajax-msg" class="alert alert-dismissible"
					style="display: none;">
					<button type="button" class="close" data-dismiss="alert"
						aria-hidden="true">×</button>
					<h4></h4>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 col-md-offset-3">
					<div id="uploadSignDiv">
						<h3>Please upload your signature</h3>
						<canvas id="testCanvas" width="400" height="250"
							style="border: 1px solid black;">Your browser does not support canvas.</canvas>
						<br />
						<div id="fileSelectDiv">

							<input type="file" id="signatureFile"
								onchange="handleFileSelect()" />
						</div>
						<div id="cropBtns">
							<input type="button" onclick="cropper.startCropping()"
								value="Start cropping" /> <input type="button"
								onclick="cropper.getCroppedImageSrc()" value="Crop" /> <input
								type="button" onclick="cropper.restore()" value="Restore" />
						</div>
						<h1></h1>
						<input type="button" name="submitFile" id="upload"
							class="form-control btn btn-primary" value="Upload Signature" />
					</div>
				</div>
			</div>
		</div>

		<div id="drawContainer" class="container" style="display: none;">
			<div class="col-md-6 col-md-offset-3">
				<div id="signpad-ajax-msg" class="alert alert-dismissible"
					style="display: none;">
					<button type="button" class="close" data-dismiss="alert"
						aria-hidden="true">×</button>
					<h4></h4>
				</div>
			</div>
			<div id="signpad-div" class="row signpad-padding">
				<div class="col-md-6 col-md-offset-3">
					<h3>Please draw your signature</h3>
					<div class="wrapper">
						<canvas id="signature-pad" class="signature-pad" width=400
							height=200></canvas>
					</div>
					<p>
						<button id="save">Save</button>
						<button id="clear">Clear</button>
					</p>
				</div>
			</div>
		</div>
	</div>
	<script
		src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script
		src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>
	<script type="text/javascript" src="/js/cropper.js"></script>
	<script>
	
	$(document).ready(function() {
		  $('input[type=radio][name="signOption"]').on('change', function() {
			  if(this.value=="upload") {
				  $('#uploadContainer').show();
				  $('#drawContainer').hide();
			  } else {
				  $('#drawContainer').show();
				  $('#uploadContainer').hide();
			  }
		  });
		});
	// CROPPER SCRIPT
	cropper.start(document.getElementById("testCanvas"), 1); // initialize cropper by providing it with a target canvas and a XY ratio (height = width * ratio)
	
	function handleFileSelect() {
		// this function will be called when the file input below is changed
		var file = document.getElementById("signatureFile").files[0];  // get a reference to the selected file
		
		var reader = new FileReader(); 
		reader.onload = function(event) {
			var data = event.target.result; // the "data url" of the image
			cropper.showImage(data); 
			console.log("Cropper--->"+data)
		};
		// this loads the file as a data url calling the function above once done
		reader.readAsDataURL(file); 
	
	}
	
	var uploadBtn = document.getElementById('upload');
	var myCanvas = document.getElementById("testCanvas");
	// on click of Upload Button
	uploadBtn.addEventListener('click', function(event) {
		event.preventDefault();
		var dataURI = myCanvas.toDataURL();
		console.log("on Click of upload"+ dataURI);
		var data = {
				imgURI : dataURI
				
		};
		$.ajax({
			type : "POST",
			data : JSON.stringify(data),
			contentType : "application/json",
		    url : "saveSignature",
			cache : false,
			success : function(data) {
				if(data == "Success") {
					$('#upload-ajax-msg').addClass('alert-success');
					$('#upload-ajax-msg').find("h4").append("Successfully saved signature.");
					$('#upload-ajax-msg').show();
					$('#uploadSignDiv').hide();
				}
				else {
					$('#upload-ajax-msg').addClass('alert-danger');
					$('#upload-ajax-msg').find("h4").append("Error while saving signature. Please try again.");
					$('#upload-ajax-msg').show();
				}
			}
		});
		
	});
	
	<!-- ----------Signature Pad Script------------------->
		var signaturePad = new SignaturePad(document
				.getElementById('signature-pad'), {
			backgroundColor : 'rgba(255, 255, 255, 0)',
			penColor : 'rgb(0, 0, 0)'
		});
		var saveButton = document.getElementById('save');
		var cancelButton = document.getElementById('clear');

		saveButton.addEventListener('click', function(event) {
			event.preventDefault();
			var sign = signaturePad.toDataURL('image/png');
			var data ={
					signImg : sign
			};
			$.ajax({
				type : "POST",
				data : JSON.stringify(data),
				contentType : "application/json",
			    url : "saveSignature",
				cache : false,
				success : function(data) {
					if(data == "Success") {
						$('#signpad-ajax-msg').addClass('alert-success');
						$('#signpad-ajax-msg').find("h4").append("Successfully saved signature.");
						$('#signpad-ajax-msg').show();
						$('#signpad-div').hide();
					}
					else {
						$('#signpad-ajax-msg').addClass('alert-danger');
						$('#signpad-ajax-msg').find("h4").append("Error while saving signature. Please try again.");
						$('#signpad-ajax-msg').show();
					}
				}
			});
		});

		cancelButton.addEventListener('click', function(event) {
			signaturePad.clear();
		});
	</script>
</body>
</html> -->